<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plaid Test Kit - Identity</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <!-- Access Token Section -->
    <div class="card">
        <h3>Access Token</h3>
        <div class="grid grid-2">
            <div>
                <div class="form-group">
                <label>Name Score:</label>
                <div class="score-field" id="nameScore">-</div>
            </div>
            
            <div class="form-group">
                <label>Name Match Results:</label>
                <div>
                    <span class="boolean-field" id="isNicknameMatch">Nickname: -</span>
                    <span class="boolean-field" id="isFirstLastMatch">First/Last: -</span>
                    <span class="boolean-field" id="isBusinessName">Business: -</span>
                </div>
            </div>
            
            <div class="form-group">
                <label>Email Score:</label>
                <div class="score-field" id="emailScore">-</div>
            </div>
            
            <div class="form-group">
                <label>Phone Score:</label>
                <div class="score-field" id="phoneScore">-</div>
            </div>
            
            <div class="form-group">
                <label>Address Score:</label>
                <div class="score-field" id="addressScore">-</div>
            </div>

            <div class="form-group">
                <label>Postal Code Match:</label>
                <div>
                    <span class="boolean-field" id="isPostalCodeMatch">Postal Code: -</span>
                </div>
            </div>
        </div>
        
        <!-- Retrieved Data Column -->
        <div class="card">
            <h3>Retrieved Data (/get endpoint)</h3>

            <div class="form-group">
                <label>Account Details:</label>
                <div>
                    <div class="result-field" id="accountInfo">-</div>
                </div>
            </div>
            
            <div class="form-group">
                <label>Full Name:</label>
                <div class="result-field" id="retrievedName">-</div>
            </div>
            
            <div class="form-group">
                <label>Email Address:</label>
                <div class="result-field" id="retrievedEmail">-</div>
            </div>
            
            <div class="form-group">
                <label>Phone Number:</label>
                <div class="result-field" id="retrievedPhone">-</div>
            </div>
            
            <div class="form-group">
                <label>Street Address:</label>
                <div class="result-field" id="retrievedStreet">-</div>
            </div>
            
            <div class="form-group">
                <label>City:</label>
                <div class="result-field" id="retrievedCity">-</div>
            </div>
            
            <div class="form-group">
                <label>State:</label>
                <div class="result-field" id="retrievedState">-</div>
            </div>
            
            <div class="form-group">
                <label>ZIP Code:</label>
                <div class="result-field" id="retrievedZip">-</div>
            </div>
            
            <div class="form-group">
                <label>Country:</label>
                <div class="result-field" id="retrievedCountry">-</div>
            </div>
        </div>
    </div>

    <!-- Raw Response Section -->
    <div class="card">
        <h3>/identity/get Raw API Response</h3>
            <div class="config-preview">
                <pre id="rawIdentityGetResponse" class="terminal" style="max-height: 400px; overflow-y: auto;">// API response will appear here after testing</pre>
            </div>
            <button class="btn btn-outline mt-1" onclick="copyRawResponse('identity_get')" style="margin-top: 8px;">Copy Response</button>
        <h3>/identity/match Raw API Response</h3>
            <div class="config-preview">
                <pre id="rawIdentityMatchResponse" class="terminal" style="max-height: 400px; overflow-y: auto;">// API response will appear here after testing</pre>
            </div>
            <button class="btn btn-outline mt-1" onclick="copyRawResponse('identity_match')" style="margin-top: 8px;">Copy Response</button>
    </div>

    <!-- Load JavaScript modules -->
    <script src="/js/api-client.js"></script>
    <script src="/js/ui-utils.js"></script>
    <script src="/js/navbar.js"></script>
    <script src="/js/account-manager.js"></script>
    <script src="/js/identity-tester.js"></script>
</body>
</html>    <label for="accessTokenInput">Access Token:</label>
                    <input type="text" id="accessTokenInput" placeholder="Enter access token or connect via Link">
                </div>
                <button id="setTokenButton" class="btn btn-primary" onclick="setAccessToken()">Set Token & Load Accounts</button>
            </div>
            <div>
                <div id="tokenStatus"></div>
                <div id="currentTokenDisplay" class="code-display hidden"></div>
            </div>
        </div>
    </div>
    
    <!-- Status Display -->
    <div id="apiStatus"></div>

    <!-- Main Testing Interface -->
    <div class="grid grid-3">
        <!-- Input Column -->
        <div class="card">
            <h3>Input User Information</h3>
            <form id="identityForm">
                <div class="form-group">
                    <label for="accountSelect">Select Account:</label>
                    <select id="accountSelect" name="account_index">
                    <option value="">ðŸš« Accounts not loaded yet!</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="name">Full Name:</label>
                    <input type="text" id="name" name="name" placeholder="Joe MacMillan">
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="email" placeholder="joe@cardiffelectric.com">
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" placeholder="+555-555-5555">
                </div>
                
                <div class="form-group">
                    <label for="street">Street Address:</label>
                    <input type="text" id="street" name="street" placeholder="123 Main St">
                </div>
                
                <div class="form-group">
                    <label for="city">City:</label>
                    <input type="text" id="city" name="city" placeholder="Austin">
                </div>
                
                <div class="form-group">
                    <label for="state">State:</label>
                    <input type="text" id="state" name="state" placeholder="TX">
                </div>
                
                <div class="form-group">
                    <label for="zip">ZIP Code:</label>
                    <input type="text" id="zip" name="zip" placeholder="73301">
                </div>
                
                <div class="form-group">
                    <label for="country">Country:</label>
                    <input type="text" id="country" name="country" value="US">
                </div>
                
                <button type="submit" class="btn btn-primary btn-full">Test Identity</button>
            </form>
        </div>
        
        <!-- Match Results Column -->
        <div class="card">
            <h3>Match Scores (/match endpoint)</h3>
            
            <div class="form-group">